dependencies:
  pre:
    - curl -L -o google-chrome.deb https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
    - sudo dpkg -i google-chrome.deb
    - sudo sed -i 's|HERE/chrome\"|HERE/chrome\" --disable-setuid-sandbox|g' /opt/google/chrome/google-chrome
    - rm google-chrome.deb
  override:
    - npm run build

machine: # 虛擬機的環境
  java:
    version: openjdk8
  node:
    version: 7.10.0
  npm: 
    version: 5.4.1
jobs:
  build:
    #working_directory: ~/mern-starter
    # The primary container is an instance of the first list image listed. Your build commands run in this container.
    #docker:
    #  - image: circleci/node:4.8.2
    # The secondary container is an instance of the second listed image which is run in a common network where ports exposed on the primary container are available on localhost.
    #  - image: mongo:3.4.4
    steps:
      - checkout
      - run:
          name: Install npm
          command: npm install
      - run:
          name: Build npm
          command: npm run build
      # - save_cache:
      #     key: dependency-cache-{{ checksum "package.json" }}
      #     paths:
      #       - node_modules

